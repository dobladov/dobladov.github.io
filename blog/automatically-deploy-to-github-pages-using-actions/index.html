<!DOCTYPE html><html lang="en" data-astro-cid-colb5upu> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/png" href="/orb512.png"><meta name="generator" content="Astro v5.4.3"><link rel="manifest" href="/manifest.webmanifest"><meta http-equiv="content-language" content="en"><link rel="alternate" type="application/rss+xml" title="RSS feed" href="/rss.xml"><link rel="alternate" type="application/feed+json" title="JSON feed" href="/feed.json"><!-- Canonical URL --><link rel="canonical" href="https://dobla.do/blog/automatically-deploy-to-github-pages-using-actions/"><link rel="sitemap" href="/sitemap-index.xml"><!-- Primary Meta Tags --><title>Automatically deploy to GitHub Pages using Actions - Daniel Doblado</title><meta name="title" content="Automatically deploy to GitHub Pages using Actions"><meta name="description" content="How to automate your workflows increasing your productivity and reducing manual errors."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://dobla.do/blog/automatically-deploy-to-github-pages-using-actions/"><meta property="og:title" content="Automatically deploy to GitHub Pages using Actions"><meta property="og:description" content="How to automate your workflows increasing your productivity and reducing manual errors."><meta property="og:image" content="https://dobla.do/orb512.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://dobla.do/blog/automatically-deploy-to-github-pages-using-actions/"><meta property="twitter:title" content="Automatically deploy to GitHub Pages using Actions"><meta property="twitter:description" content="How to automate your workflows increasing your productivity and reducing manual errors."><meta property="twitter:image" content="https://dobla.do/orb512.png"><!-- Mastodon --><meta name="fediverse:creator" content="@danieldobla@mastodon.social"><script type="module">document.body.removeAttribute("data-js");</script><style>a[data-astro-cid-eimmu3lg]{color:var(--text)}a[data-astro-cid-eimmu3lg].active{color:var(--accent);transform:scale(1.01);text-decoration-color:var(--accent)}.pattern[data-astro-cid-pj7xj6mf]{--fill: rgba(255, 255, 255, .15);position:absolute;top:-5%;left:0;width:100%;height:30vh;background-size:7px 7px;-webkit-mask-image:radial-gradient(at top center,var(--background) 45%,transparent 70%);mask-image:radial-gradient(at top center,var(--background) 45%,transparent 70%);background-image:radial-gradient(var(--fill) 1px,transparent 0);pointer-events:none;z-index:-1}.bottom[data-astro-cid-pj7xj6mf]{top:auto;bottom:0;-webkit-mask-image:radial-gradient(at bottom center,var(--background) 45%,transparent 70%);mask-image:radial-gradient(at bottom center,var(--background) 45%,transparent 70%)}header[data-astro-cid-3ef6ksr2]{margin:0;padding:0 var(--paddingSides);padding-top:2rem;z-index:1}h1[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{color:var(--accent);text-decoration:none}h1[data-astro-cid-3ef6ksr2]{margin:0;filter:url(#goovey);font-size:3em;text-align:center;font-weight:100}nav[data-astro-cid-3ef6ksr2]{display:flex;align-items:center;justify-content:space-between;flex-direction:column;gap:1.5rem;align-items:stretch;max-width:110rem;margin:0 auto}.internalLinks[data-astro-cid-3ef6ksr2]{font-size:1.3em;display:flex;justify-content:center;align-items:center;gap:.8rem}@media screen and (min-width: 768px){h1[data-astro-cid-3ef6ksr2]{font-size:3em}nav[data-astro-cid-3ef6ksr2]{flex-direction:row}.internalLinks[data-astro-cid-3ef6ksr2]{flex-wrap:wrap}}svg[data-astro-cid-3ef6ksr2]{width:1rem;fill:var(--text)}@media print{header[data-astro-cid-3ef6ksr2]{display:none}}.rss[data-astro-cid-3ef6ksr2]{position:relative;top:.1rem}footer[data-astro-cid-sz7xmlte]{position:relative;flex-wrap:wrap;padding-left:var(--paddingSides);padding-right:var(--paddingSides);padding-bottom:2rem;display:flex;justify-content:space-evenly;align-items:center;gap:1em;font-size:1.3rem;font-weight:600;text-shadow:1px 1px 1px var(--background)}@media screen and (min-width: 768px){footer[data-astro-cid-sz7xmlte]{justify-content:center}}@media print{footer[data-astro-cid-sz7xmlte]{display:none}}main[data-astro-cid-colb5upu]{flex:1}section[data-astro-cid-colb5upu]{padding-top:2rem;padding-bottom:2rem;padding-left:var(--paddingSides);padding-right:var(--paddingSides)}
article{margin:0 auto;max-width:46rem}article p{margin-bottom:2em}@media screen and (min-width: 468px){article{margin-top:2rem}}.toArticle{position:fixed;top:-100%;left:50%;transform:translate(-50%);transition:top .3s ease-in-out;padding:0 1rem}.toArticle:focus{top:1%}#title{text-align:left}.date{text-align:right;font-style:italic}.description{font-size:2rem;line-height:110%;text-align:center}@keyframes adjust-progressbar{0%{height:0}to{height:100%}}aside:before,aside:after{content:"";position:absolute;top:0;left:0;width:.25rem;height:100%;background:var(--text);border-radius:.25rem}@supports (animation-timeline: scroll(block root)){aside:after{background:var(--accent);animation:adjust-progressbar;animation-timeline:scroll(block root);animation-duration:auto}}aside{display:none;position:fixed;left:1rem;top:50%;max-width:15rem;transform:translateY(-50%);max-height:50vh;padding-left:1rem;padding-right:1rem}aside ul{list-style:none;margin:0;padding:0}aside a{text-overflow:ellipsis;display:inline-block;text-decoration:none;transition:transform .2s ease-out;transform-origin:left;line-height:1;padding-bottom:.5rem;color:var(--text)}aside a.active{color:var(--accent)}aside a:hover{transform:scale(1.1);color:var(--accent)}pre{margin-bottom:2rem}@media screen and (min-width: 992px){img,pre{--space: 8rem;width:calc(100% + var(--space));position:relative;left:calc(var(--space) / -2);max-width:calc(100% + var(--space))!important}#title{--space: 5rem;width:calc(100% + var(--space));position:relative;left:calc(var(--space) / -2);font-size:4rem}}@media screen and (min-width: 1300px){aside{display:block}}summary{cursor:pointer}.details{font-family:Courier New,monospace;padding-top:1rem}#metadata{display:flex;flex-direction:column;justify-content:space-between;font-size:.8rem}.tags{display:flex;flex-wrap:wrap;column-gap:.5rem;justify-content:flex-end}.metaSection{gap:1.5rem;display:flex;justify-content:space-between;border-top:1px solid var(--text);padding-top:.2rem;padding-bottom:.2rem}.centered{padding-top:1rem}.correctLink{margin-top:1.5rem}@media print{article{max-width:210mm;width:210mm}.toArticle,.date,.correctLink,details{display:none}}
:root{--background: rgb(22, 22, 22);--accent: rgb(250, 250, 250);--text: rgb(161, 161, 170);--link: rgb(255, 99, 71);--paddingSides: 1.5rem;--transparentBackground: rgb(22, 22, 22, .4);--border: rgb(41, 42, 49)}html{scrollbar-gutter:stable}@media not (prefers-reduced-motion){html{scroll-behavior:smooth}}body{font-family:Trebuchet MS,sans-serif;margin:0;padding:0;text-align:left;word-wrap:break-word;overflow-wrap:break-word;color:var(--text);line-height:1.7;background-color:var(--background);display:flex;flex-direction:column;min-height:100vh}::selection{color:var(--accent);background:#ff6347cc}h1,h2,h3,h4,h5,h6{margin:0 0 .5rem;line-height:1.2;color:var(--accent)}h1{font-size:2.5em}h2{font-size:2.441em}h3{font-size:1.953em}h4{font-size:1.563em}h5{font-size:1.25em}strong,b{color:var(--accent);font-weight:700}a{color:var(--accent);position:relative;text-decoration:none;background:linear-gradient(0deg,var(--link),var(--link)) no-repeat right bottom / 0 var(--bg-h);transition:background-size .35s;--bg-h: 100%;padding-bottom:2px;--bg-h: 2px}a:hover{background-size:100% var(--bg-h);background-position-x:left}p{margin-bottom:1em;color:var(--text)}textarea{width:100%;font-size:16px}input{font-size:16px}table{width:100%}img{max-width:100%;height:auto;border-radius:8px}code{padding:2px 5px;border-radius:2px;color:#9ecbff;border:1px solid #9ecbff;background:#24292f}pre{padding:1.5em;border-radius:8px}pre>code{all:unset}blockquote{border-left:4px solid var(--accent);padding:0 0 0 20px;margin:0;font-size:1.333em}hr{border:none;border-top:1px solid rgb(229,233,240)}.centered{text-align:center}@media screen and (min-width: 468px){body{--paddingSides: 4rem}h1{font-size:3.052em}}@media print{*{-webkit-transition:none!important;transition:none!important}body{--background: white;--text: black;--accent: charcoal}}
.separator[data-astro-cid-jchhmuzl]{color:var(--link)}
</style></head> <body data-js="false" data-astro-cid-colb5upu> <a class="toArticle" href="#article">To the article</a> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h1 data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Daniel Doblado</a> </h1> <div class="internalLinks" data-astro-cid-3ef6ksr2> <a href="/blog" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Blog </a>  <a href="/projects" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Projects </a>  <a href="/tags" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Tags </a>  <a href="/rss.xml" class="rss" title="RSS" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg>  <svg width="1.01em" height="1em" data-astro-cid-3ef6ksr2="true" data-icon="rss">   <symbol id="ai:local:rss" viewBox="0 0 82.459 82.347"><g fill="currentColor" transform="translate(-10.112 -9.668)"><circle cx="21.243" cy="80.884" r="11.131"/><path d="M18.229 40.126a7.626 7.626 0 1 0 0 15.253c15.917 0 28.865 12.95 28.865 28.865a7.626 7.626 0 0 0 7.628 7.627 7.627 7.627 0 0 0 7.627-7.627c0-24.326-19.793-44.118-44.12-44.118"/><path d="M17.997 9.668a7.628 7.628 0 0 0 0 15.254c32.708.001 59.32 26.613 59.32 59.322a7.627 7.627 0 1 0 15.254 0c0-41.118-33.453-74.573-74.574-74.576"/></g></symbol><use href="#ai:local:rss"></use>  </svg>  </a>  <!-- <ThemeToggle /> --> </div> </nav> <svg style="width: 0; height: 0" xmlns="http://www.w3.org/2000/svg" version="1.1" data-astro-cid-3ef6ksr2> <defs data-astro-cid-3ef6ksr2> <filter id="goovey" data-astro-cid-3ef6ksr2> <feTurbulence type="fractalNoise" baseFrequency="0.03" numOctaves="1" result="warpper" data-astro-cid-3ef6ksr2></feTurbulence> <feColorMatrix in="warpper" type="hueRotate" data-astro-cid-3ef6ksr2> <animate attributeType="XML" attributeName="values" values="0;110;150;210;360" dur="6s" repeatCount="indefinite" data-astro-cid-3ef6ksr2></animate> </feColorMatrix> <feDisplacementMap xChannelSelector="R" yChannelSelector="G" scale="20" in="SourceGraphic" data-astro-cid-3ef6ksr2></feDisplacementMap> </filter> </defs> </svg> <div class="pattern" data-astro-cid-pj7xj6mf></div> </header> <main data-astro-cid-colb5upu> <section data-astro-cid-colb5upu>   <article id="article"> <header> <h1 id="title">Automatically deploy to GitHub Pages using Actions</h1> <div class="date"> 7 min read<span class="separator" data-astro-cid-jchhmuzl>&nbsp;·&nbsp;</span><time datetime="2020-02-07T00:00:00.000Z"> Feb 7, 2020 </time> <div>
Last updated — <time datetime="2023-08-13T00:00:00.000Z"> Aug 13, 2023 </time> </div> </div> </header> <aside> <ul> <li> <a title="Navigate to the start of the article" href="#title">Start</a> </li> <li> <a href="#advantages">Advantages</a> </li><li> <a href="#creating-a-new-action">Creating a new Action</a> </li><li> <a href="#more-about-it">More about it</a> </li><li> <a href="#documentation">Documentation</a> </li> <li> <a id="metadataLink" title="Navigate to the end of the article" href="#metadata">Metadata</a> </li> </ul> </aside> <p class="description"> How to automate your workflows increasing your productivity and reducing manual errors. </p>  <p><img alt="List of github actions executed or failed" width="906" height="298" loading="lazy" decoding="async" src="/_astro/actions.BQ_GQP7M_1VOBco.webp" ></p>
<p>This has become the main way to deploy most of my projects and it has greatly reduced the time invested doing it by hand, also avoiding headaches that you might be familiar with like, “ohhh! I forgot to checkout the proper branch”, “I used the wrong script.”, “I accidentally deleted the database and all the backups while updating a CSS color”.</p>
<p>After setting up this workflow your code will be automatically deployed after each commit to master without human interaction and without having to use other service than GitHub.</p>
<blockquote>
<p>“There should be two tasks for a human being to perform to deploy software into a development, test, or production environment: to pick the version and environment and to press the “deploy” button.”
― David Farley, Continuous Delivery: Reliable Software Releases through Build, Test, and Deployment Automation</p>
</blockquote>
<h2 id="advantages">Advantages<a aria-hidden="true" tabindex="-1" href="#advantages"><span class="icon icon-link"></span></a></h2>
<p>If just mentioning the world <em>“Automatically”</em> does not catch your attention, these are some of the main reasons why is worth to write some tiny workflows.</p>
<h3 id="single-source-of-truth">Single source of truth<a aria-hidden="true" tabindex="-1" href="#single-source-of-truth"><span class="icon icon-link"></span></a></h3>
<p>Your code and and scrips for deployment are on same repository ensuring that all the information to create a build is on the repository and no manual process or tool is missing.</p>
<h3 id="documentation-of-deployments">Documentation of deployments<a aria-hidden="true" tabindex="-1" href="#documentation-of-deployments"><span class="icon icon-link"></span></a></h3>
<p>The <code>.yml</code> workflow shows how to do a proper deployment, other developers should know how it can be replicated locally; Even if there are no comments it might be easy to reverse engineer this files.</p>
<h3 id="automated-testing">Automated testing<a aria-hidden="true" tabindex="-1" href="#automated-testing"><span class="icon icon-link"></span></a></h3>
<p>Before each build tests can be enforce to avoid putting code on production that might contain errors or not follow the code style guide.</p>
<h3 id="no-more-manual-tasks">No more manual tasks<a aria-hidden="true" tabindex="-1" href="#no-more-manual-tasks"><span class="icon icon-link"></span></a></h3>
<p>This is clear, automating a process is always faster and in general less error prone than putting your code manually in production on a Friday before vacations.</p>
<h3 id="multi-platform">Multi-platform<a aria-hidden="true" tabindex="-1" href="#multi-platform"><span class="icon icon-link"></span></a></h3>
<p>Multiple platforms can be tested while doing the deployment without the need of the developers of installing virtual machines.</p>
<h3 id="cost">Cost<a aria-hidden="true" tabindex="-1" href="#cost"><span class="icon icon-link"></span></a></h3>
<p>Manual deployment will cost you at the very least time, GitHub actions are for free both in price and your time, why not use them?</p>
<h2 id="creating-a-new-action">Creating a new Action<a aria-hidden="true" tabindex="-1" href="#creating-a-new-action"><span class="icon icon-link"></span></a></h2>
<p>Choose a repository, go to Actions and add new one.</p>
<p>We need to create a new file, in this case is called <code>deploy.yml</code>, here we will define the process for the deployment, make sure to <strong>never put any secrets in here</strong> since it will be committed to the repository.</p>
<p>The structure goes this way, we need a <code>name</code>, <code>on</code> which circumstances we need to run this action, and which <code>jobs</code> the action will execute.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deploy to GitHub Pages</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  push</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    branches</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">master</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">jobs</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  build-and-deploy</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">    steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Checkout</span></span>
<span class="line"><span style="color:#85E89D">        uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build</span></span>
<span class="line"><span style="color:#85E89D">        uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/setup-node@v4</span></span>
<span class="line"><span style="color:#85E89D">        with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          node-version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"22.x"</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">          npm install</span></span>
<span class="line"><span style="color:#9ECBFF">          npm test</span></span>
<span class="line"><span style="color:#9ECBFF">          npm run build</span></span>
<span class="line"><span style="color:#9ECBFF">          touch dist/.nojekyll</span></span>
<span class="line"><span style="color:#9ECBFF">          echo "snoo.odyssey.codes" > dist/CNAME</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deploy</span></span>
<span class="line"><span style="color:#85E89D">        uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">JamesIves/github-pages-deploy-action@releases/v3</span></span>
<span class="line"><span style="color:#85E89D">        with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          GITHUB_TOKEN</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#85E89D">          BRANCH</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">gh-pages</span></span>
<span class="line"><span style="color:#85E89D">          FOLDER</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">dist</span></span></code></pre>
<p>After saving this new workflow we should have a file called <code>deploy.yml</code> inside <code>.github/workflows</code>.</p>
<p>Immediately a new action will be triggered executing the workflow, making a new build and pushing it to the <code>gh-pages</code> branch.</p>
<p>After is finish our app should be available at the repository public URL, the URL is show in Setting -> GitHub Pages, here you can also set a custom one.</p>
<h3 id="functionality-of-each-block">Functionality of each block<a aria-hidden="true" tabindex="-1" href="#functionality-of-each-block"><span class="icon icon-link"></span></a></h3>
<p>Let’s go trough each part of the code.</p>
<p>Here we are indicating push code to master should trigger this Action.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  push</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    branches</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">master</span></span></code></pre>
<p>Inside of jobs we have to define the machine that will run the code, in this case Ubuntu.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#85E89D">build-and-deploy</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">	runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span></code></pre>
<h4 id="steps-of-the-job">Steps of the job<a aria-hidden="true" tabindex="-1" href="#steps-of-the-job"><span class="icon icon-link"></span></a></h4>
<p>The Action is now divided in different <code>steps</code> that will be executed sequentially.</p>
<p>This step will checkout your repository to make the code available.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#E1E4E8">- </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Checkout</span></span>
<span class="line"><span style="color:#85E89D">  uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v4</span></span></code></pre>
<p>Now we set node.js and we use version 13 to run the code, I would recommend to read the docs to do some other interesting stuff like running multiple node versions.</p>
<p>This step will be similar for other code like go or rust</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#E1E4E8">- </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build</span></span>
<span class="line"><span style="color:#85E89D">  uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/setup-node@v4</span></span>
<span class="line"><span style="color:#85E89D">  with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    node-version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"22.x"</span></span></code></pre>
<p>The interesting part, here we have to define the process of actually building the site in this case something similar to what we would execute on our local machine to do it.</p>
<p>In this case I install the missing node packages, test the code and compile the site.</p>
<p>After this I added some special stuff for this repository, for example I make sure to create a file indicating that is not a Jekyll repository but this is actually not required in most cases.</p>
<p>After that I define the CNAME since I want this code to run on a custom domain instead of <code>user.github.io/repository</code></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#E1E4E8">- </span><span style="color:#85E89D">run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">  npm install</span></span>
<span class="line"><span style="color:#9ECBFF">  npm test</span></span>
<span class="line"><span style="color:#9ECBFF">  npm run build</span></span>
<span class="line"><span style="color:#9ECBFF">  touch dist/.nojekyll</span></span>
<span class="line"><span style="color:#9ECBFF">  echo "snoo.odyssey.codes" > dist/CNAME</span></span></code></pre>
<p>With this last step we push the code to the <code>gh-pages</code> branch of the repository</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#E1E4E8">- </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deploy</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">JamesIves/github-pages-deploy-action@releases/v3</span></span>
<span class="line"><span style="color:#85E89D">      with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        GITHUB_TOKEN</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#85E89D">        BRANCH</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">gh-pages</span></span>
<span class="line"><span style="color:#85E89D">        FOLDER</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">dist</span></span></code></pre>
<p>If any of this steps fails the process will stop ensuring no “bad build” will be out on production.</p>
<h2 id="more-about-it">More about it<a aria-hidden="true" tabindex="-1" href="#more-about-it"><span class="icon icon-link"></span></a></h2>
<h3 id="committing-the-build-to-a-different-repository">Committing the build to a different repository<a aria-hidden="true" tabindex="-1" href="#committing-the-build-to-a-different-repository"><span class="icon icon-link"></span></a></h3>
<p>I had the use case of having to push the build to a different repository from the one where the sources are.</p>
<p>In this case I wanted to have the code of my blog on a repository and deploy this build to a GitHubs’s special repository named name.github.io, to serve my personal page from here since ‘gh-pages’ does not work for this repository and my blog does not use Jekyll meaning the source code has to be on a separated repository and the build on master.</p>
<p>To create this token go to <code>Settings</code> -> <code>Developer settings</code> -> <code>Personal access tokens</code> and create a new one.</p>
<p>With this configuration, we can use a personal token that needs to be set on Settings -> Secrets, since the <code>secrets.GITHUB_TOKEN</code> only allows you to commit to your current repository.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#E1E4E8">- </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deploy</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">peaceiris/actions-gh-pages@v4</span></span>
<span class="line"><span style="color:#85E89D">      with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        personal_token</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.PERSONAL_TOKEN }}</span></span>
<span class="line"><span style="color:#85E89D">        external_repository</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">dobladov/dobladov.github.io</span></span>
<span class="line"><span style="color:#85E89D">        publish_branch</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">master</span></span>
<span class="line"><span style="color:#85E89D">        publish_dir</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./dist</span></span>
<span class="line"></span></code></pre>
<h3 id="testing-multiple-platforms">Testing multiple platforms<a aria-hidden="true" tabindex="-1" href="#testing-multiple-platforms"><span class="icon icon-link"></span></a></h3>
<p>Different platforms might use different commands.</p>
<p>For example let’s say there’s a <code>rm</code> in the scripts of the package.js while this build should work on MacOS and Linux, unfortunately it will fail on Windows since the <code>rm</code> command is not available, with a multiple platform test we will realize that using a solution like <code>rimraf</code> instead of <code>rm</code> will solve the problem for Windows.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#85E89D">strategy</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      matrix</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        platform</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">ubuntu-latest</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">macos-latest</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">windows-latest</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">    runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ matrix.platform }}</span></span></code></pre>
<h3 id="writing-a-cname-for-custom-domains">Writing a CNAME for custom domains<a aria-hidden="true" tabindex="-1" href="#writing-a-cname-for-custom-domains"><span class="icon icon-link"></span></a></h3>
<p>If your deployments needs a custom domain don’t forget to write this file on each build.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#79B8FF">echo</span><span style="color:#9ECBFF"> "snoo.odyssey.codes"</span><span style="color:#F97583"> ></span><span style="color:#9ECBFF"> dist/CNAME</span></span></code></pre>
<h3 id="running-actions-on-other-events">Running actions on other events<a aria-hidden="true" tabindex="-1" href="#running-actions-on-other-events"><span class="icon icon-link"></span></a></h3>
<p>Actions are not limited to push to master, is possible to also execute test or do other task on pull request or any kind of supported action, also to schedule this tasks using cron.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  schedule</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">cron</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"0 * * * *"</span></span></code></pre>
<h3 id="not-only-for-deployments">Not only for deployments<a aria-hidden="true" tabindex="-1" href="#not-only-for-deployments"><span class="icon icon-link"></span></a></h3>
<p>Actions can be used for creating new release packages, also notifications, emails can be send on each event, the limit is your imagination.</p>
<h3 id="disadvantages">Disadvantages<a aria-hidden="true" tabindex="-1" href="#disadvantages"><span class="icon icon-link"></span></a></h3>
<p>One of the main disadvantages, is that like any other service if is down you will not be able of deploying using these workflows, It does not limit you to still do manual deployments for your application.</p>
<p>If you wonder why your perfectly working action does not work don’t forget to check: <a href="https://status.github.com/" rel="nofollow" target="_blank">https://status.github.com/</a></p>
<p>Actions are not a 100% reliable if the infrastructure of GitHub fails, I had a problem where GitHub did not trigger one of my builds when I merged new code, a way to force a new commit without changes is to execute <code>git commit --allow-empty</code>, this will cause the action to be executed.</p>
<h2 id="documentation">Documentation<a aria-hidden="true" tabindex="-1" href="#documentation"><span class="icon icon-link"></span></a></h2>
<p>Documentation worth reading:</p>
<ul>
<li><a href="https://github.com/actions/setup-node" rel="nofollow" target="_blank">Node Action documentation</a></li>
<li><a href="https://github.com/JamesIves/github-pages-deploy-action" rel="nofollow" target="_blank">Deploy Action documentation</a></li>
<li><a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions" rel="nofollow" target="_blank">GitHub Actions documentation</a></li>
<li><a href="https://github.com/actions/checkout" rel="nofollow" target="_blank">Checkout Action documentation</a></li>
</ul>
<p>Some examples of my GitHub Actions:</p>
<ul>
<li><a href="https://github.com/dobladov/snoo/blob/master/.github/workflows/deploy.yml" rel="nofollow" target="_blank">Snoo</a></li>
<li><a href="https://github.com/dobladov/last-time/blob/master/.github/workflows/deploy.yml" rel="nofollow" target="_blank">Last-Time</a></li>
<li><a href="https://github.com/dobladov/mdx-blog/blob/master/.github/workflows/deploy.yml" rel="nofollow" target="_blank">This blog</a></li>
</ul>  <!-- <Share title={title} description={description} url={href} /> --> <details class="details"> <summary>Metadata</summary> <div id="metadata"> <div class="metaSection"> <span class="title">Published</span> <time datetime="2020-02-07T00:00:00.000Z"> Feb 7, 2020 </time> </div> <div class="metaSection"> <span class="title">Updated</span> <time datetime="2023-08-13T00:00:00.000Z"> Aug 13, 2023 </time> </div> <div class="metaSection"> <span class="title">Length</span> <span>7 min read (1314 words)</span> </div> <div class="metaSection"> <span class="title">License</span> <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> </div> <div class="metaSection"> <span class="title">Tags</span> <div class="tags">  <a href="/tags/GitHub">#GitHub </a>  <a href="/tags/devops">#devops </a>  <a href="/tags/production">#production </a>  <a href="/tags/gh-pages">#gh-pages</a>  </div> </div> <div class="centered"> <a class="correctLink" target="_blank" href="https://github.com/dobladov/astro-blog/edit/main/src/content/blog/automatically-deploy-to-GitHub-Pages-using-Actions/index.md">Did I make a mistake? Please consider sending a pull request</a> </div> <script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Automatically deploy to GitHub Pages using Actions","editor":"Daniel Doblado","genre":"GitHub devops production gh-pages","keywords":"GitHub devops production gh-pages","wordcount":1314,"url":"https://dobla.do/blog/automatically-deploy-to-github-pages-using-actions/","datePublished":"2020-02-07T00:00:00.000Z","dateCreated":"2020-02-07T00:00:00.000Z","dateModified":"2023-08-13T00:00:00.000Z","description":"How to automate your workflows increasing your productivity and reducing manual errors.","author":{"url":"https://dobla.do","@type":"Person","name":"Daniel Doblado"}}</script> </div> </details> <div class="progress"></div> </article>  </section> </main> <footer data-astro-cid-sz7xmlte> <a target="_blank" href="https://codepen.io/dobladov" data-astro-cid-sz7xmlte>CodePen</a> <a target="_blank" href="mailto:danieldoblado@gmail.com" data-astro-cid-sz7xmlte>E-Mail</a> <a target="_blank" href="https://github.com/dobladov" data-astro-cid-sz7xmlte>GitHub</a> <a target="_blank" href="https://stackoverflow.com/users/2498992/daniel-doblado" data-astro-cid-sz7xmlte>StackOverflow</a> <div class="pattern bottom" data-astro-cid-pj7xj6mf></div> </footer>  </body></html> <script type="module">const r=document.querySelectorAll("#title, h2, #metadata"),n=new IntersectionObserver(e=>{const c=[...document.querySelectorAll("aside a")];e.forEach(t=>{const s=c.find(i=>i.href.endsWith(`#${t.target.id}`));t.isIntersecting?s?.classList.add("active"):s?.classList.remove("active")})},{threshold:.9});r.forEach(e=>{n.observe(e)});</script>